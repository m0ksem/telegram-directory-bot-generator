var Q=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var O=(s,t,e)=>t in s?Q(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,W=(s,t)=>{for(var e in t||(t={}))Z.call(t,e)&&O(s,e,t[e]);if(z)for(var e of z(t))ee.call(t,e)&&O(s,e,t[e]);return s};import{r as y,d as L,c as j,w as E,o as I,a as A,b as $,F as R,e as H,n as te,f as ne,t as q,g as oe,h as ae,u as B,i as se,j as X,k as b,l as r,m as v,p as le,q as ce,s as N,v as Y,x as re,y as ue,W as ie}from"./vendor.f2982eb0.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}};de();const K=()=>{const s=y(null);return{selected:s,set:u=>{s.value=u},unset:()=>{s.value=null}}};const ve={class:"draggable-canvas__item-content"},pe=L({props:{items:{type:Array,default:()=>[]}},emits:["update:items","update:hovered","update:selected","update:mouse"],setup(s,{emit:t}){const e=s,u=j({get(){return e.items},set(a){t("update:items",a)}}),{selected:o,set:l,unset:n}=K(),{selected:i,set:h,unset:C}=K(),M=y(),x=y({x:0,y:0}),S=a=>{const{x:d,y:c,width:_,height:V}=M.value.getBoundingClientRect();if(t("update:mouse",{x:a.x-d-_/2,y:a.y-c-V/2}),!o.value)return;const F={x:a.x-d-_/2-x.value.x,y:a.y-c-V/2-x.value.y};o.value.position=F},p=a=>{const d=a.position||{x:0,y:0};return{transform:`translateX(${d.x}px) translateY(${d.y}px) translateX(-50%) translateY(-50%)`}},m=a=>{if(!i.value)return;const{x:d,y:c,width:_,height:V}=a.target.getBoundingClientRect();x.value={x:a.x-d-_/2,y:a.y-c-V*2},l(i.value)},f=()=>{n()};let k=-1;const U=a=>{clearTimeout(k),h(a)},D=a=>{C(),k=setTimeout(()=>{n()},2e3)};return E(o,a=>t("update:selected",a)),E(i,a=>{t("update:hovered",a)}),(a,d)=>(I(),A("div",{class:"draggable-canvas-wrapper",onMousemove:S,onMousedown:m,onMouseup:f,onMouseleave:d[0]||(d[0]=(...c)=>B(n)&&B(n)(...c))},[$("div",{class:"draggable-canvas",ref:(c,_)=>{_.canvas=c,M.value=c}},[(I(!0),A(R,null,H(B(u),(c,_)=>(I(),A("div",{class:"draggable-canvas__item",key:_,style:te(p(c))},[ne(a.$slots,"item",oe(ae({index:_,item:c,style:{cursor:"move"},listeners:{mouseenter:()=>U(c),mouseleave:()=>D()}})),()=>[$("div",ve,q(c.position),1)])],4))),128))],512)],32))}});const me=L({props:{connections:{type:Array,default:[]}},setup(s){const t=s,e=y(),u=y(),{getColor:o}=X(),l=()=>{var C,M;const n=u.value;n.lineWidth=15,n.strokeStyle=o("gray");const i=((C=e.value)==null?void 0:C.width)||0,h=((M=e.value)==null?void 0:M.height)||0;n.clearRect(0,0,i,h),t.connections.forEach(x=>{n.beginPath(),n.moveTo(x.start.x+i/2,x.start.y+h/2),n.lineTo(x.end.x+i/2,x.end.y+h/2),n.stroke()})};return se(()=>{var n;!e.value||(u.value=(n=e.value)==null?void 0:n.getContext("2d"),e.value.height=e.value.offsetHeight,e.value.width=e.value.offsetWidth,l())}),E(()=>t.connections,()=>{l()},{deep:!0}),(n,i)=>(I(),A("canvas",{ref:(h,C)=>{C.canvas=h,e.value=h}},null,512))}}),fe=()=>{const{setColors:s}=X(),t=y(!1),e=()=>{t.value=!0,s({primary:"#290bff",secondary:"#6863f8",background:"#0b0f12",success:"#00a35f",info:"#827ef3",danger:"#ef1e00",warning:"#e1cb00",gray:"#aeaeb1",dark:"#ffffff",white:"#020000"})},u=()=>{t.value=!1,s({primary:"#2C82E0",secondary:"#767C88",background:"#f4f8fa",success:"#40e583",info:"#2c82e0",danger:"#DE1041",warning:"#FFAC0A",gray:"#babfc2",dark:"#1B1A1F",white:"#ffffff"})},o=()=>t.value?u():e();return u(),{isDark:t,toggle:o,toDark:e,toWhite:u}};const _e={class:"app"},ge=N(" Add "),ye=N(" Switch theme "),he=["onClick"],xe=N("Delete"),be=N("Add button"),Ce=["onClick"],ke={class:"connections"},we=L({setup(s){const{toggle:t}=fe(),e=y([{data:{id:0,text:"",buttons:[]},position:{x:0,y:0}},{data:{text:"",id:1,buttons:[]},position:{x:100,y:250}}]),u=p=>{p.data.buttons.push({toId:-1,text:""})},o=y([]),l=y({x:0,y:0}),n=y(null),i=y(null),h=j(()=>{const p=o.value.map(f=>({start:e.value.find(k=>f.start===k.data.id).position,end:e.value.find(k=>f.end===k.data.id).position})),m=[];return n.value&&m.push({start:n.value.position,end:l.value}),[...p,...m]}),C=(p,m)=>{i.value=m,n.value=p},M=p=>{!n.value||!i.value||(o.value.push({start:n.value.data.id,end:p.data.id}),i.value.toId=p.data.id,n.value=null,i.value=null)},x=p=>{e.value=e.value.filter((m,f)=>f!==f)},S=()=>{e.value.push({data:{text:"",id:e.value.length,buttons:[]},position:{x:0,y:0}})};return(p,m)=>{const f=b("va-button"),k=b("va-navbar-item"),U=b("va-navbar"),D=b("va-card-title"),a=b("va-input"),d=b("va-card-content"),c=b("va-icon"),_=b("va-list-item"),V=b("va-card-actions"),F=b("va-card");return I(),A("div",_e,[r(U,null,{right:v(()=>[r(k,null,{default:v(()=>[r(f,{class:"mr-2",onClick:S},{default:v(()=>[ge]),_:1}),r(f,{onClick:B(t)},{default:v(()=>[ye]),_:1},8,["onClick"])]),_:1})]),_:1}),r(pe,{items:e.value,"onUpdate:items":m[0]||(m[0]=T=>e.value=T),mouse:l.value,"onUpdate:mouse":m[1]||(m[1]=T=>l.value=T),style:{"z-index":"1"}},{item:v(({index:T,listeners:G,style:J,item:w})=>[r(F,{class:"card",color:"white"},{default:v(()=>[r(D,le(ce(G),{style:W({color:"var(--va-info)"},J)}),{default:v(()=>[N(" Action "+q(w.data.id),1)]),_:2},1040,["style"]),r(d,null,{default:v(()=>[r(a,{label:"Text",modelValue:w.data.answer,"onUpdate:modelValue":g=>w.data.answer=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),w.data.buttons.length?(I(),Y(d,{key:0},{default:v(()=>[(I(!0),A(R,null,H(w.data.buttons,g=>(I(),Y(_,{class:"button"},{default:v(()=>[r(a,{modelValue:g.text,"onUpdate:modelValue":P=>g.text=P,label:g.toId===-1?"Not connected":`Connected to ${g.toId}`},null,8,["modelValue","onUpdate:modelValue","label"]),$("div",{class:"connect-to-circle d-flex align--center justify--center",onClick:P=>C(w,g)},[r(c,{name:g.toId===-1?"show_chart":"moving",size:"small"},null,8,["name"])],8,he)]),_:2},1024))),256))]),_:2},1024)):re("",!0),r(V,{align:"between"},{default:v(()=>[r(f,{color:"danger",onClick:g=>x()},{default:v(()=>[xe]),_:2},1032,["onClick"]),r(f,{onClick:g=>u(w)},{default:v(()=>[be]),_:2},1032,["onClick"])]),_:2},1024),$("div",{class:"connect-from-circle d-flex align--center justify--center",onClick:g=>M(w)},[r(c,{name:"fiber_manual_record",size:"small"})],8,Ce)]),_:2},1024)]),_:1},8,["items","mouse"]),$("div",ke,[r(me,{connections:B(h)},null,8,["connections"])])])}}});ue(we).use(ie).mount("#app");
