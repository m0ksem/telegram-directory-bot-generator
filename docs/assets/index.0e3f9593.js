var Be=Object.defineProperty;var re=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var ue=(l,o,e)=>o in l?Be(l,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[o]=e,K=(l,o)=>{for(var e in o||(o={}))Se.call(o,e)&&ue(l,e,o[e]);if(re)for(var e of re(o))Ve.call(o,e)&&ue(l,e,o[e]);return l};import{r as y,o as Re,c as W,d as F,a as w,b as L,e as I,F as ie,f as de,n as ve,u as x,g as Q,t as ne,h as me,i as fe,j as Z,k as _e,l as pe,w as se,m as b,p as r,q as d,s as P,v as J,x as Ee,y as Me,z as ge,A as Le,B as A,C as he,D as Ue,W as Te}from"./vendor.b57659a0.js";const He=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const u of t)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function e(t){const u={};return t.integrity&&(u.integrity=t.integrity),t.referrerpolicy&&(u.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?u.credentials="include":t.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(t){if(t.ep)return;t.ep=!0;const u=e(t);fetch(t.href,u)}};He();const ye=()=>{const l=y(null);return{selected:l,set:s=>{l.value=s},unset:()=>{l.value=null}}},Ne=()=>{let l=y([]);const o=e=>{e&&l.value.push(e)};return Re(()=>{l.value=[]}),{itemRefs:l,setItemRef:o}},Ae=(l,o,e)=>[W({get(){return l[o]},set(s){e(`update:${o}`,s)}})];const Oe={class:"draggable-canvas__item-content"},ze=F({props:{items:{type:Array,default:()=>[]}},emits:["update:items","update:hovered","update:selected","update:mouse"],setup(l,{emit:o}){const e=l,[s]=Ae(e,"items",o),{itemRefs:t,setItemRef:u}=Ne(),{selected:f,set:g,unset:_}=ye(),{selected:c,set:i,unset:k}=ye(),v=y(),p=y({x:0,y:0}),T=C=>{const{x:B,y:$,width:R,height:j}=v.value.getBoundingClientRect();if(f.value===null)return;const X=t.value[f.value].getBoundingClientRect(),q=v.value.offsetWidth/R,a=v.value.offsetHeight/j,n={x:(C.x-B-R/2+X.width/2)*q-p.value.x*q,y:(C.y-$-j/2+X.height/2)*a-p.value.y*a},m=s.value[f.value];m.position=n},S=C=>{const B=C.position||{x:0,y:0};return{transform:`translateX(${B.x}px) translateY(${B.y}px) translateX(-50%) translateY(-50%)`}},U=C=>{if(c.value===null)return;const{x:B,y:$}=C.target.getBoundingClientRect();p.value={x:C.x-B,y:C.y-$},g(c.value)},H=()=>{_()};let O=-1;const D=C=>{clearTimeout(O),i(C)},Y=()=>{k(),O=window.setTimeout(()=>{_()},2e3)};return(C,B)=>(w(),L("div",{class:"draggable-canvas-wrapper",onMousemove:T,onMousedown:U,onMouseup:H,onMouseleave:B[0]||(B[0]=(...$)=>x(_)&&x(_)(...$))},[I("div",{class:"draggable-canvas",ref:($,R)=>{R.canvas=$,v.value=$}},[(w(!0),L(ie,null,de(x(s),($,R)=>(w(),L("div",{class:"draggable-canvas__item",key:R,style:ve(S($)),ref:x(u)},[Q(C.$slots,"item",me(fe({index:R,item:$,style:{cursor:"move"},listeners:{mouseenter:()=>D(R),mouseleave:()=>Y()}})),()=>[I("div",Oe,ne($.position),1)])],4))),128))],512)],32))}});const De=F({props:{connections:{type:Array,default:[]}},setup(l){const o=l,e=y(),s=y(),{getColor:t}=pe(),u=i=>"$el"in i?i.$el:i,f=i=>{if(i===void 0||!e.value)return{x:0,y:0};const{x:k,y:v,width:p,height:T}=e.value.getBoundingClientRect(),S={x:e.value.offsetWidth/p,y:e.value.offsetHeight/T};if("x"in i&&"y"in i)return{x:(i.x-k)*S.x,y:(i.y-v)*S.y};const U=u(i);if(!U.getBoundingClientRect)return{x:0,y:0};const{x:H,y:O,width:D,height:Y}=U.getBoundingClientRect();return{x:(H+D/2-k)*S.x,y:(O+Y/2-v)*S.y}},g=()=>{var p,T;const i=s.value,k=((p=e.value)==null?void 0:p.width)||0,v=((T=e.value)==null?void 0:T.height)||0;i.clearRect(0,0,k,v),o.connections.forEach(S=>{const U=f(S.start),H=f(S.end);i.beginPath(),i.moveTo(U.x,U.y),i.lineTo(H.x,H.y),i.stroke()})},_=()=>{requestAnimationFrame(()=>{g(),_()})},c=()=>{var i;!e.value||(e.value.height=e.value.offsetHeight,e.value.width=e.value.offsetWidth,s.value=(i=e.value)==null?void 0:i.getContext("2d"),s.value.lineWidth=12,s.value.strokeStyle=t("gray"))};return Z(()=>{!e.value||(c(),_(),window.addEventListener("resize",c))}),_e(()=>{window.removeEventListener("resize",c)}),(i,k)=>(w(),L("canvas",{ref:(v,p)=>{p.canvas=v,e.value=v}},null,512))}});var We=(l,o)=>{const e=l.__vccOpts||l;for(const[s,t]of o)e[s]=t;return e};const Fe={},Pe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},Ye=I("path",{d:"M12 0a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.4-4-1.4-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.4 1 .2-.8.5-1.3.8-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.1-.4-.6-1.6.1-3.2 0 0 1-.3 3.3 1.2a11.5 11.5 0 0 1 6 0C17.3 4.7 18.3 5 18.3 5c.7 1.6.2 2.9.1 3.2.8.8 1.3 1.9 1.3 3.2 0 4.6-2.9 5.6-5.5 5.9.4.4.8 1.1.8 2.2v3.3c0 .3.2.7.8.6A12 12 0 0 0 12 0z"},null,-1),Je=[Ye];function je(l,o){return w(),L("svg",Pe,Je)}var Xe=We(Fe,[["render",je]]);const qe=()=>{const l={cb:void 0};return{create:s=>{l.cb=s},call:(...s)=>{l.cb&&l.cb(...s)}}},xe=l=>{const o=y({x:0,y:0}),e=y({x:0,y:0}),s=y({left:!1,middle:!1,right:!1}),t=x(l)||window,{create:u,call:f}=qe(),g=v=>{v.button===1&&(s.value.left=!0),v.button===4&&(s.value.middle=!0),v.button===2&&(f(v),s.value.right=!0)},_=v=>{s.value={left:!1,middle:!1,right:!1}},c=v=>{o.value={x:v.x,y:v.y},e.value={x:v.movementX,y:v.movementY}};Z(()=>{t.addEventListener("mousedown",g),t.addEventListener("mouseup",_),t.addEventListener("mousemove",c)});const i=()=>t.getBoundingClientRect?t.getBoundingClientRect():{width:window.innerWidth,height:window.innerHeight},k=()=>{if(!t)return{x:0,y:0};const{width:v,height:p}=i();return{x:o.value.x-v/2,y:o.value.y-p/2}};return _e(()=>{t.removeEventListener("mousedown",g),t.removeEventListener("mouseup",_),t.removeEventListener("mousemove",c)}),t.oncontextmenu=v=>v.preventDefault(),{mouse:o,mousemove:e,buttons:s,onRightClick:u,normalize:k}},Ge={max:10,min:-10,speed:.1},Ke=(l,o)=>{const e=y(0),s=x(l)||window,{max:t,min:u,speed:f}=K(K({},Ge),o),g=_=>{const c=_.deltaY/Math.abs(_.deltaY),i=e.value+f*c;i>t||i<u||(e.value=i)};return Z(()=>{s.addEventListener("wheel",g)}),{scroll:e}};const Qe={class:"scroll-wrapper"},Ze=F({setup(l){const o=y({x:0,y:0}),{mousemove:e,buttons:s,mouse:t,normalize:u}=xe(),{scroll:f}=Ke(void 0,{max:.7,min:0,speed:.1}),g=W(()=>1-f.value),_=W(()=>{const c=o.value.x/(1/g.value),i=o.value.y/(1/g.value);return{transform:`translateX(${c}px) translateY(${i}px) scale(${g.value}) translateX(-50%) translateY(-50%)`}});return se(e,c=>{s.value.right&&(o.value.x+=c.x*(1/g.value),o.value.y+=c.y*(1/g.value))}),(c,i)=>(w(),L("div",Qe,[I("div",{class:"scroll-wrapper__content",style:ve(x(_))},[Q(c.$slots,"default",me(fe({position:o.value,scale:x(g)})))],4)]))}}),et={class:"json-config-popup"},tt=I("h2",null,"Bot config",-1),ot={class:"code-snippet"},nt=F({props:{createConfig:{type:Function,required:!0}},setup(l){const o=l,e=y(!1),s=y({});return se(e,t=>{t&&(s.value=o.createConfig())}),(t,u)=>{const f=b("va-button"),g=b("va-modal");return w(),L("div",et,[r(f,{onClick:u[0]||(u[0]=_=>e.value=!e.value)},{default:d(()=>[Q(t.$slots,"default")]),_:3}),r(g,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=_=>e.value=_),"cancel-text":""},{header:d(()=>[tt]),default:d(()=>[I("pre",ot,ne(JSON.stringify(s.value,void 0,2))+`
      `,1)]),_:1},8,["modelValue"])])}}});const st={class:"json-config-popup"},at=I("h2",null,"Bot config",-1),lt={class:"json-config-popup__modal"},ct={class:"code-snippet"},rt=F({emits:["update:config"],setup(l,{emit:o}){const e=y(!1),s=y("");return se(s,()=>{o("update:config",JSON.parse(s.value))}),(t,u)=>{const f=b("va-button"),g=b("va-input"),_=b("va-modal");return w(),L("div",st,[r(f,{onClick:u[0]||(u[0]=c=>e.value=!e.value)},{default:d(()=>[Q(t.$slots,"default")]),_:3}),r(_,{modelValue:e.value,"onUpdate:modelValue":u[2]||(u[2]=c=>e.value=c),"cancel-text":"","max-width":"90%"},{header:d(()=>[at]),default:d(()=>[I("div",lt,[I("pre",ct,[r(g,{height:"90vh",type:"textarea",modelValue:s.value,"onUpdate:modelValue":u[1]||(u[1]=c=>s.value=c)},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}}),ut=()=>{const{setColors:l}=pe(),o=y(!1),e=()=>{o.value=!0,l({primary:"#3e4df7",secondary:"#202020",background:"#121212",success:"#60a315",info:"#827ef3",danger:"#f00a67",warning:"#febf6d",gray:"#aeaeb1",dark:"#ffffff",white:"#020000",cardColor:"#202020"})},s=()=>{o.value=!1,l({primary:"#2C82E0",secondary:"#cbe4f0",background:"#f4f8fa",success:"#40e583",info:"#2c82e0",danger:"#DE1041",warning:"#FFAC0A",gray:"#202020",dark:"#0a1622",white:"#ffffff",cardColor:"#fcfdff"})},t=()=>o.value?s():e();return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e():s(),{isDark:o,toggle:t,toDark:e,toWhite:s}},it=()=>JSON.parse(localStorage.getItem("items")||"null")||dt,dt=[{id:0,text:"Welcome!",buttons:[{text:"Go to second message",id:0,messageId:"1"},{text:"Link to our repo!",id:1,url:"https://github.com/m0ksem/telegram-directory-bot-generator"}],position:{x:-300,y:0}},{text:"I'm second message",id:1,buttons:[],position:{x:250,y:300}},{text:"I'm not connected :(",id:2,buttons:[{text:"This button does nothing",id:0}],position:{x:300,y:-200}}];const vt={class:"app"},mt=A(" Bot dictionary generator "),ft=A(" Add "),_t=A(" Save "),pt=A(" Import from JSON "),gt=A(" Export to JSON "),ht=A(" Action "),yt={class:"ml-2"},xt=A("Buttons"),bt={class:"pr-2"},Ct={class:"bot-button__state-buttons"},wt=A("Add button"),kt=["onClick"],$t={class:"connections"},It=F({setup(l){const o=y(!1),{toggle:e,isDark:s}=ut(),t=y(it()),u=()=>{t.value.push({text:"",id:t.value.length,buttons:[],position:{x:0,y:0}})},f=a=>{const n=t.value[a];t.value=t.value.filter((m,E)=>E!==a),c.value=c.value.filter(m=>m.end.item.id!==n.id)},g=a=>{a.buttons.push({text:"",id:`${a.id}-${a.buttons.length}`})},_=(a,n)=>{a.buttons=a.buttons.filter(m=>m.id!==n.id),c.value=c.value.filter(m=>m.button.id!==n.id)},c=y([]),i=y(),{mouse:k,onRightClick:v}=xe(i),p=y(null);v(()=>O());const T=W(()=>{const a=c.value.map(m=>({start:m.start.el,end:m.end.el})),n=[];return p.value&&n.push({start:p.value.el,end:k.value}),[...a,...n]}),S=(a,n,m)=>{p.value={item:a,button:n,el:m.target}},U=(a,n)=>{!p.value||(c.value.push({start:p.value,end:{item:a,el:n.target},button:p.value.button}),p.value.button.messageId=String(a.id),p.value=null)},H=a=>{c.value=c.value.filter(n=>n.button.id!==a.id),a.messageId=void 0},O=()=>{p.value=null},D=a=>c.value.some(n=>n.button.id===a.id),Y=a=>c.value.some(n=>n.end.item.id===a.id),C=W(()=>t.value.reduce((a,n)=>n.id===0||c.value.some(m=>m.end.item.id===n.id)?a:a+1,0)),B=W(()=>t.value.reduce((a,n)=>n.buttons.reduce((m,E)=>E.url!==void 0?0:c.value.some(G=>G.button.id===E.id)?m:m+1,0)+a,0)),$=(a=!1)=>a?t.value.map(n=>({text:n.text,id:n.id,buttons:n.buttons.map(m=>({text:m.text,messageId:m.messageId,url:m.url}))})):t.value,R=a=>n=>{a.el=n},j=a=>n=>{a.connectEl=n},ee=()=>{t.value.forEach(a=>{a.buttons.forEach(n=>{if(n.messageId===void 0)return;const m=t.value.find(E=>String(E.id)===n.messageId);!m||c.value.push({start:{item:a,el:n.el},end:{item:m,el:m.connectEl},button:n})})})};Z(()=>{ee()});const X=a=>{t.value=a.map(n=>(n.buttons||(n.buttons=[]),n)),o.value=!0,he(()=>{o.value=!1,he(()=>{ee()})})},q=()=>{localStorage.items=JSON.stringify(t.value)};return(a,n)=>{const m=b("va-navbar-item"),E=b("va-icon"),G=b("va-badge"),ae=b("va-popover"),M=b("va-button"),be=b("va-navbar"),Ce=b("va-card-title"),te=b("va-input"),le=b("va-card-content"),we=b("va-list-label"),ke=b("va-list-item"),ce=b("va-card"),$e=b("va-card-actions");return w(),L("div",vt,[r(be,null,{left:d(()=>[r(m,{class:"display-5"},{default:d(()=>[mt]),_:1})]),right:d(()=>[r(m,{class:"d-flex align--center"},{default:d(()=>[x(C)!==0?(w(),P(ae,{key:0,message:`${x(C)} item(s) unconnected`,color:"background"},{default:d(()=>[r(G,{overlap:"",text:x(C),class:"mr-4",color:"warning"},{default:d(()=>[r(E,{name:"comments_disabled",color:"gray"})]),_:1},8,["text"])]),_:1},8,["message"])):J("",!0),x(B)!==0?(w(),P(ae,{key:1,message:`${x(B)} button(s) unused`,color:"background"},{default:d(()=>[r(G,{overlap:"",text:x(B),class:"mr-4",color:"warning"},{default:d(()=>[r(E,{name:"link_off",color:"gray"})]),_:1},8,["text"])]),_:1},8,["message"])):J("",!0),r(M,{class:"mr-2",onClick:u,icon:"add"},{default:d(()=>[ft]),_:1}),r(M,{class:"mr-2",onClick:q,icon:"save"},{default:d(()=>[_t]),_:1}),r(rt,{class:"mr-2","onUpdate:config":X},{default:d(()=>[pt]),_:1}),r(nt,{class:"mr-2","create-config":$},{default:d(()=>[gt]),_:1}),r(M,{class:"mr-2",onClick:x(e),round:"",color:x(s)?"#f4f8fa":"#202020","text-color":"white"},{default:d(()=>[r(E,{name:"palette",color:x(s)?"#202020":"#f4f8fa"},null,8,["color"])]),_:1},8,["onClick","color"]),r(M,{href:"https://github.com/m0ksem/telegram-directory-bot-generator",round:"",color:"#000"},{default:d(()=>[r(Xe,{style:{color:"white",fill:"white"}})]),_:1})]),_:1})]),_:1}),o.value?J("",!0):(w(),P(Ze,{key:0},{default:d(()=>[r(ze,{items:t.value,"onUpdate:items":n[0]||(n[0]=N=>t.value=N),mouse:x(k),"onUpdate:mouse":n[1]||(n[1]=N=>Le(k)?k.value=N:null),style:{"z-index":"1"}},{item:d(({index:N,listeners:oe,style:Ie,item:V})=>[r(ce,{class:"action-card",style:{opacity:"0.94"}},{default:d(()=>[r(Ce,Ee(Me(oe),{style:K({color:"var(--va-primary)",background:"rgba(0, 0, 0, 0.1)"},Ie)}),{default:d(()=>[ht,I("span",yt,ne(V.id+1),1)]),_:2},1040,["style"]),r(le,{class:"pt-2"},{default:d(()=>[r(te,{label:"Text",type:"textarea",modelValue:V.text,"onUpdate:modelValue":h=>V.text=h,placeholder:"Message text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),V.buttons.length?(w(),P(le,{key:0},{default:d(()=>[r(we,{color:"primary"},{default:d(()=>[xt]),_:1}),(w(!0),L(ie,null,de(V.buttons,h=>(w(),P(ce,{outlined:"",style:{margin:"0 -8px"},class:"mb-1"},{default:d(()=>[r(ke,{class:"bot-button"},{default:d(()=>[r(M,{class:"mr-2",icon:"delete",color:"danger",onClick:z=>_(V,h)},null,8,["onClick"]),I("div",bt,[r(te,{modelValue:h.text,"onUpdate:modelValue":z=>h.text=z,label:"Button Text",placeholder:"Button text"},null,8,["modelValue","onUpdate:modelValue"]),h.url!==void 0?(w(),P(te,{key:0,class:"mt-2",modelValue:h.url,"onUpdate:modelValue":z=>h.url=z,label:"Button url",placeholder:"Button url"},null,8,["modelValue","onUpdate:modelValue"])):J("",!0)]),I("div",Ct,[r(M,{class:ge(["state-button",{"state-button--selected":h.url===void 0}]),onClick:z=>{S(V,h,z),h.url=void 0},icon:D(h)?"moving":"show_chart",color:D(h)?"success":"warning",ref:R(h)},null,8,["class","onClick","icon","color"]),r(M,{class:ge(["state-button",{"state-button--selected":h.url!==void 0}]),onClick:z=>{O(),H(h),h.url=""},icon:"link"},null,8,["class","onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:2},1024)):J("",!0),r($e,{align:"between"},{default:d(()=>[r(M,{disabled:t.value.length===1,color:"danger",onClick:h=>f(N),icon:"delete",fab:""},null,8,["disabled","onClick"]),r(M,{onClick:h=>g(V),icon:"add"},{default:d(()=>[wt]),_:2},1032,["onClick"])]),_:2},1024),I("div",{class:"connect-to-circle d-flex align--center justify--center",onClick:h=>U(V,h),ref:j(V)},[r(M,{icon:"fiber_manual_record",color:Y(V)?"success":"warning"},null,8,["color"])],8,kt)]),_:2},1024)]),_:1},8,["items","mouse"]),I("div",$t,[r(De,{ref:(N,oe)=>{oe.connectionsCanvas=N,i.value=N},connections:x(T)},null,8,["connections"])])]),_:1}))])}}});Ue(It).use(Te,{components:{VaCard:{color:"cardColor"}}}).mount("#app");
